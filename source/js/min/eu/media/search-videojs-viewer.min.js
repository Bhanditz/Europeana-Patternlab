define([],function(){"use strict";function a(a){var b=$(".media-viewer .object-media-video").find(".video-js");console.log("initialiseViewer()"),videojs(a,{}),b&&i>=h?(h+=1,$(".media-viewer").trigger("media_init")):h=0}function b(a){console.log("setTechOrder()");var b=a.getAttribute("data-tech-order");return b?(console.log("tech order: "+b),void(videojs.options.techOrder=[b])):void console.log("no tech order provdied, thus no need to set it")}function c(c){require(["aurora"],function(){require(["flac"],function(){require(["videojs"],function(){require(["videojs_aurora"],function(){b(c),a(c)})})})})}function d(c){require(["videojs"],function(){require(["videojs_silverlight"],function(){videojs.options.silverlight.xap="/js/dist/lib/videojs-silverlight/video-js.xap",b(c),a(c)})})}function e(c){console.log("initVideojs()"),require(["videojs"],function(){console.log("videojs loaded"),b(c),a(c)})}function f(){console.log("determineMediaViewer()");var a,b=$("audio.is-current")[0]||$("video.is-current")[0];if(!b)return void console.log("no viewer available");if(a=b.getElementsByTagName("source")[0].getAttribute("type"),!a)return void console.log("no mime type available");switch(console.log("determined mime-type: "+a),a){case"audio/flac":c(b);break;case"video/wmv":d(b);break;case"video/x-msvideo":d(b);break;case"video/x-ms-wmv":d(b);break;default:e(b)}}function g(){console.log("search-videojs-viewer init()"),f()}var h=0,i=9,j="undefined"==typeof js_path?"/js/dist/lib/videojs/videojs.css":js_path+"lib/videojs/videojs.css";return $("head").append('<link rel="stylesheet" href="'+j+'" type="text/css"/>'),{init:function(){g()}}});