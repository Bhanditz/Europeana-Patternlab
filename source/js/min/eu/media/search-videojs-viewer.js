define([],function(){"use strict";function a(a){console.log(a)}function b(b){a("initFlac"),j.attr("data-setup",'{ "techOrder": ["aurora"] }'),require(["aurora"],function(){require(["flac"],function(){require(["videojs_aurora"],function(){b()})})})}function c(b){a("initSilverlight"),require(["videojs_silverlight"],function(){b({silverlight:{xap:h},techOrder:["silverlight"]})})}function d(d,e){switch(a("determineMediaViewer: "+d),d){case"audio/flac":b(e);break;case"video/wmv":c(e);break;case"video/x-msvideo":c(e);break;case"video/x-ms-wmv":c(e);break;default:e()}}function e(a){i.src([{type:a.mime_type,src:a.url}]),i.play()}function f(b){return media_item=b,a("init video viewer with media_item:\n	"+JSON.stringify(media_item,null,4)),j=$("audio, video"),0==j.length?void a("no media dom element available"):media_item.mime_type?void require(["videojs"],function(){d(media_item.mime_type,function(b){if(i=videojs(j[0],{}),b){for(var c in b)videojs.options[c]=b[c];a("options full:\n	"+JSON.stringify(videojs.options,null,4))}e(media_item),$(".media-viewer").trigger("object-media-open")})}):void a("no mime type available")}var g="undefined"==typeof js_path?"/js/dist/lib/videojs/videojs.css":js_path+"lib/videojs/videojs.css",h="undefined"==typeof js_path?"/js/dist/lib/videojs-silverlight/video-js.xap":js_path+"lib/videojs-silverlight/video-js.xap",i=null,j=null;return $("head").append('<link rel="stylesheet" href="'+g+'" type="text/css"/>'),{init:function(a){f(a)}}});