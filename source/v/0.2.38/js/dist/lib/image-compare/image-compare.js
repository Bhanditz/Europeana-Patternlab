define(["jquery"],function(a){"use strict";function b(a){console.log(a)}function c(b){b.each(function(){var b=a(this);a(window).scrollTop()+.5*a(window).height()>b.offset().top&&b.addClass("is-visible")}),j=!1}function d(b){b.each(function(){var b=a(this);g(b.find('.cd-image-label[data-type="modified"]'),b.find(".cd-resize-img"),"left"),g(b.find('.cd-image-label[data-type="original"]'),b.find(".cd-resize-img"),"right")}),k=!1}function e(a,b,c,d,e){a.on("mousedown vmousedown",function(g){a.addClass("draggable"),b.addClass("resizable");var h=a.outerWidth(),j=a.offset().left+h-g.pageX,k=c.offset().left,l=c.outerWidth(),m=k+10,n=k+l-h-10;a.parents().on("mousemove vmousemove",function(a){i||(i=!0,window.requestAnimationFrame?requestAnimationFrame(function(){f(a,j,h,m,n,k,l,b,d,e)}):setTimeout(function(){f(a,j,h,m,n,k,l,b,d,e)},100))}).on("mouseup vmouseup",function(c){a.removeClass("draggable"),b.removeClass("resizable")}),g.preventDefault()}).on("mouseup vmouseup",function(c){a.removeClass("draggable"),b.removeClass("resizable")})}function f(b,c,d,e,f,h,j,k,l,m){var n=b.pageX+c-d;e>n?n=e:n>f&&(n=f);var o=100*(n+d/2-h)/j+"%";a(".draggable").css("left",o).on("mouseup vmouseup",function(){a(this).removeClass("draggable"),k.removeClass("resizable")}),a(".resizable").css("width",o),g(m,k,"left"),g(l,k,"right"),i=!1}function g(a,b,c){"left"==c?a.offset().left+a.outerWidth()<b.offset().left+b.outerWidth()?a.removeClass("is-hidden"):a.addClass("is-hidden"):a.offset().left>b.offset().left+b.outerWidth()?a.removeClass("is-hidden"):a.addClass("is-hidden")}function h(){b("init image compare"),c(l),a(window).on("scroll",function(){j||(j=!0,window.requestAnimationFrame?requestAnimationFrame(function(){c(l)}):setTimeout(function(){c(l)},100))}),l.each(function(){var b=a(this);e(b.find(".cd-handle"),b.find(".cd-resize-img"),b,b.find('.cd-image-label[data-type="original"]'),b.find('.cd-image-label[data-type="modified"]'))}),a(window).on("resize",function(){k||(k=!0,window.requestAnimationFrame?requestAnimationFrame(function(){d(l)}):setTimeout(function(){d(l)},100))})}a("head").append('<link rel="stylesheet" href="'+require.toUrl("../lib/image-compare/style.css")+'" type="text/css"/>');var i=!1,j=!1,k=!1,l=a(".image-compare");return{init:function(){h()}}});