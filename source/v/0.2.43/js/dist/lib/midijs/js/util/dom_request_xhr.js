"undefined"==typeof MIDI&&(MIDI={}),function(a){var b=a.util||(a.util={});if(b.request=function(b,d,e,f){"use strict";"string"==typeof b&&(b={url:b});var g=b.data,h=b.url,i=b.method||(b.data?"POST":"GET"),j=b.format,k=b.headers,l=b.responseType,m=b.withCredentials||!1,d=d||b.onsuccess,e=e||b.onerror,f=f||b.onprogress;if("undefined"!=typeof c&&a.loc.isLocalUrl(h))return void c.readFile(h,"utf8",function(a,b){a?e&&e(a):d&&d({responseText:b})});var n=new XMLHttpRequest;if(n.open(i,h,!0),k)for(var o in k)n.setRequestHeader(o,k[o]);else g&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");return"binary"===j&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),l&&(n.responseType=l),m&&(n.withCredentials="true"),e&&"onerror"in n&&(n.onerror=e),f&&n.upload&&"onprogress"in n.upload&&(g?n.upload.onprogress=function(a){f.call(n,a,event.loaded/event.total)}:n.addEventListener("progress",function(a){var b=0;if(a.lengthComputable)b=a.total;else if(n.totalBytes)b=n.totalBytes;else{var c=parseInt(n.getResponseHeader("Content-Length-Raw"));if(!isFinite(c))return;n.totalBytes=b=c}f.call(n,a,a.loaded/b)})),n.onreadystatechange=function(b){if(4===n.readyState)if(200===n.status||304===n.status||308===n.status||0===n.status&&a.client.cordova){if(d){var c;if("xml"===j)c=b.target.responseXML;else if("text"===j)c=b.target.responseText;else if("json"===j)try{c=JSON.parse(b.target.response)}catch(f){e&&e.call(n,b)}d.call(n,b,c)}}else e&&e.call(n,b)},n.send(g),n},"undefined"!=typeof module&&module.exports){var c=require("fs");XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=a.util.request}}(MIDI);