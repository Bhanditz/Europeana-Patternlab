define([],function(){"use strict";function a(a,b){var c,d,e=[],f=[],g=$("<div>"+b+"</div>"),h=!1;g.children().length>1?g.children().each(function(){var a=this.nodeName.toUpperCase();if("DIV"==a&&(c=$(this),d=c.attr("id")),"IFRAME"==a)c=$(this),d=c.attr("id");else if("SCRIPT"==a){var b=$(this),g=b.attr("src");g&&"string"==typeof g.toLowerCase()?e.push(g):f.push(b)}}):c=$(b);var i=function(a,b){if(a.length>0){var c=a.pop();require([c],function(){i(a,b)})}else b()};i(e.reverse(),function(){if(c.attr("src").indexOf("theeuropeanlibrary")>-1&&c.attr("src").indexOf("newspapers")>-1)a.css("width","100%"),h=!0;else if(c.attr("width")){var b=c.attr("width");b&&b===parseInt(b)+""?a.css("width",b+"px"):a.css("width",b)}a.append(c),$(f).each(function(){a.after(this)}),a.css("max-width","100%"),a.css("position","relative"),a.css("margin","auto"),c.css("margin","auto"),$("#"+d).parent().css("margin","auto"),a.find("object").css("height","100%"),h&&(a.css("margin-bottom","1em"),c.css("margin-bottom","1em"),$(".object-media-oembed iframe").on("load",function(){if(!($("#newspaper-full-screen").size()>0)){var a=$(this),b=$(".object-media-oembed").data("fullscreen-enter"),c=$(".object-media-oembed").data("fullscreen-exit"),d="http://www.theeuropeanlibrary.org/tel4/img/full-scr-transparent.png",e="http://www.theeuropeanlibrary.org/tel4/img/exit-full-scr-transparent.png";a.before('<div style="background-color: black; color: white; left: 1px; position: absolute; text-align: left; top: 1px; width: 15em;"><a id="newspaper-full-screen" style="display: table-cell; height: 2.6em; vertical-align: middle;"><img  class="fullscreen-icon" src="'+d+'" style="margin: 0 0.5em;  vertical-align: middle; width: 24px;"><span class="fullscreen-text">'+b+"</span></a></div>");var f=function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);else{a.removeClass("fullscreen");var c=a.find("iframe").data("orig-height");a.find("iframe").attr("height",c),a.find("iframe").css("height",c),$(".fullscreen-text").text(b),$(".fullscreen-icon").attr("src",d)}},g=function(){a.removeClass("fullscreen");var c=a.find("iframe").data("orig-height");a.find("iframe").attr("height",c),a.find("iframe").css("height",c),$(".fullscreen-text").text(b),$(".fullscreen-icon").attr("src",d),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()};document.addEventListener&&(document.addEventListener("webkitfullscreenchange",f),document.addEventListener("mozfullscreenchange",f),document.addEventListener("fullscreenchange",f),document.addEventListener("MSFullscreenChange",f)),a=$(".object-media-oembed"),$("#newspaper-full-screen").on("click",function(){if(a.hasClass("fullscreen"))g();else{a.addClass("fullscreen");var b=a.find("iframe").data("orig-height");b||a.find("iframe").data("orig-height",a.find("iframe").attr("height")),a.find("iframe").attr("height",$(window).height()+"px"),a.find("iframe").css("height",$(window).height()+"px"),$(".fullscreen-text").text(c),$(".fullscreen-icon").attr("src",e),a[0].requestFullscreen?a[0].requestFullscreen():a[0].msRequestFullscreen?a[0].msRequestFullscreen():a[0].mozRequestFullScreen?a[0].mozRequestFullScreen():a[0].webkitRequestFullscreen&&a[0].webkitRequestFullscreen()}})}})),$(".media-viewer").trigger("object-media-open",{hide_thumb:!0})})}return{init:function(b,c){a(b,c)}}});