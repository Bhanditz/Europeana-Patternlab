define(["jquery"],function(a){var b=function(a){console.log("carousel-appender: "+a)},c=function(a){console.warn("carousel-appender: "+a)},d=function(a){return JSON.stringify(a,null,4)},e={mlt:function(c){b("mlt template: "+c);var d="";return a.each(c.documents,function(a,b){d+='<li class="js-carousel-item"><div class="mlt-img-div height-to-width" style="background-image: url('+b.img.src+')"><div class="inner"><a title="'+b.img.alt+'" class="link" href="'+b.url+'">&nbsp;</a></div></div><span class="js-carousel-title"><a href="'+b.url+'">'+b.title+"</a>"}),{markup:d,added:c.documents.length}},media_thumb:function(c){var e="";return a.each(c,function(a,c){b("single item:\n	"+d(c)+"\n");var f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null;if(c.downloadable&&c.download&&c.download.url&&(g=c.download.url),c.technical_metadata){var p=c.technical_metadata;p.codec&&(f=p.codec),p.mime_type&&(k=p.mime_type),p.width&&(o=p.width),p.height&&(j=p.height),p.file_size&&(h=p.file_size),p.file_unit&&(i=p.file_unit),p.runtime&&(l=p.runtime),p.runtime_unit&&(m=p.runtime_unit),p.size_unit&&(n=p.size_unit)}e+='<li class="js-carousel-item"><div class="mlt-img-div height-to-width" style="background-image: url('+c.thumbnail+')"><div class="inner"><a class="link'+(c.playable?" playable":"")+'" href="#"'+(c.play_url?' data-uri="'+c.play_url+'"':"")+(g?' data-download-uri="'+g+'"':"")+(k?' data-mime-type="'+k+'"':"")+(f?' data-codec="'+f+'"':"")+(h?' data-file-size="'+h+'"':"")+(i?' data-file-unit="'+i+'"':"")+(o?' data-width="'+o+'"':"")+(j?' data-height="'+j+'"':"")+(l?' data-runtime="'+l+'"':"")+(m?' data-runtime-unit="'+m+'"':"")+(n?' data-size-unit="'+n+'"':"")+(c.is_audio?' data-type="audio"':"")+(c.is_iiif?' data-type="iiif"':"")+(c.is_image?' data-type="image"':"")+(c.is_video?' data-type="video"':"")+">&nbsp;</a></div></div></li>"}),{markup:e,added:c.length}}},f=function(d){var f=d.cmp,g=d.loadUrl,h=d.template,i=f.find("li").length;if(!e[h])return void c("no valid template found ("+h+")");var j=function(a){var b=e[h](a);i+=b.added,f.append(b.markup)},k=function(c,d){var e=d||4;b("per_page = "+e);var h=parseInt(Math.floor(i/e))+1,k=g+"?page="+h+"&per_page="+e;b("load more from: "+k),a.getJSON(k,null).done(function(a){j(a),c(i)}).fail(function(a){f.removeClass("loading"),b("failed to load data ("+JSON.stringify(a)+") from url: "+k),c(!1)})};return{append:function(a,c){b("append..."),k(a,c)},getDataCount:function(){return b("data count is "+i),i}}};return{create:function(a){return new f(a)}}});