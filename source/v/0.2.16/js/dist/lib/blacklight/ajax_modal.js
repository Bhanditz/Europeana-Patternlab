void 0===Blacklight.ajaxModal&&(Blacklight.ajaxModal={}),Blacklight.ajaxModal.modalSelector="#ajax-modal",Blacklight.ajaxModal.triggerLinkSelector="a[data-ajax-modal~=trigger], a.lightboxLink,a.more_facets_link,.ajax_modal_launch",Blacklight.ajaxModal.triggerFormSelector="form[data-ajax-modal~=trigger], form.ajax_form",Blacklight.ajaxModal.preserveLinkSelector=Blacklight.ajaxModal.modalSelector+" a[data-ajax-modal~=preserve]",Blacklight.ajaxModal.preserveFormSelector=Blacklight.ajaxModal.modalSelector+" form[data-ajax-modal~=preserve]",Blacklight.ajaxModal.containerSelector="[data-ajax-modal~=container]",Blacklight.ajaxModal.modalCloseSelector="[data-ajax-modal~=close], span.ajax-close-modal",Blacklight.ajaxModal.onFailure=function(a){var b="<div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>Ã—</button>Network Error</div>";$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(b),$(Blacklight.ajaxModal.modalSelector).modal("show")},Blacklight.ajaxModal.receiveAjax=function(a){if(0==a.readyState)Blacklight.ajaxModal.onFailure(a);else{var b=a.responseText,c=$("<div>").append(jQuery.parseHTML(b)).find(Blacklight.ajaxModal.containerSelector).first();0!==c.size()&&(b=c.html()),$(Blacklight.ajaxModal.modalSelector).find(".modal-content").html(b);var d=$.Event("loaded.blacklight.ajax-modal");if($(Blacklight.ajaxModal.modalSelector).trigger(d),d.isDefaultPrevented())return;$(Blacklight.ajaxModal.modalSelector).modal("show")}},Blacklight.ajaxModal.modalAjaxLinkClick=function(a){a.preventDefault();var b=$.ajax({url:$(this).attr("href"),dataType:"script"});b.always(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.modalAjaxFormSubmit=function(a){a.preventDefault();var b=$.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:$(this).attr("method"),dataType:"script"});b.always(Blacklight.ajaxModal.receiveAjax)},Blacklight.ajaxModal.setup_modal=function(){var a=$.Event("setup.blacklight.ajax-modal");$("body").trigger(a),a.isDefaultPrevented()||($("body").on("click",Blacklight.ajaxModal.triggerLinkSelector+", "+Blacklight.ajaxModal.preserveLinkSelector,Blacklight.ajaxModal.modalAjaxLinkClick),$("body").on("submit",Blacklight.ajaxModal.triggerFormSelector+", "+Blacklight.ajaxModal.preserveFormSelector,Blacklight.ajaxModal.modalAjaxFormSubmit),$("body").on("loaded.blacklight.ajax-modal",Blacklight.ajaxModal.check_close_ajax_modal),$("body ").on("click",Blacklight.ajaxModal.modalSelector+" a[data-dismiss~=modal]",function(a){a.preventDefault()}))},Blacklight.ajaxModal.check_close_ajax_modal=function(a){$(a.target).find(Blacklight.ajaxModal.modalCloseSelector).length&&(modal_flashes=$(this).find(".flash_messages"),$(a.target).modal("hide"),a.preventDefault(),main_flashes=$("#main-flashes"),main_flashes.append(modal_flashes),modal_flashes.fadeIn(500))},Blacklight.onLoad(function(){Blacklight.ajaxModal.setup_modal()});