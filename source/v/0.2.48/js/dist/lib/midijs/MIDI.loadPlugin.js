if("undefined"==typeof MIDI)var MIDI={};"undefined"==typeof MIDI.Soundfont&&(MIDI.Soundfont={}),function(){"use strict";var a={"#webaudio":!0,"#html5":!0,"#java":!0,"#flash":!0};MIDI.loadPlugin=function(b,c){var d,e;MIDI.audioDetect(function(c){if("undefined"==typeof d&&(d=a[window.location.hash]?window.location.hash:""),""===d){var f=-1!==navigator.userAgent.toLowerCase().indexOf("safari");d=window.webkitAudioContext?"#webaudio":window.Audio&&f===!1?"#html5":"#flash"}c["audio/ogg"]?"ogg":"mp3";switch(d){case"#java":e&&e.message("Soundfont (500KB)<br>Java Interface..."),MIDI.Java.connect(b),"undefined"!=typeof $&&$(".midi-player").removeClass("is-hidden");break;case"#flash":e&&e.message("Soundfont (2MB)<br>Flash Interface..."),DOMLoader.script.add({src:"./inc/SoundManager2/script/soundmanager2.js",verify:"SoundManager",callback:function(){MIDI.Flash.connect(b),"undefined"!=typeof $&&$(".midi-player").removeClass("is-hidden")}});break;case"#html5":DOMLoader.sendRequest({url:MIDI.soundfont_ogg_url,callback:function(a){MIDI.Soundfont=JSON.parse(a.responseText),e&&e.message("Downloading: 100%<br>Processing..."),MIDI.HTML5.connect(b),"undefined"!=typeof $&&$(".midi-player").removeClass("is-hidden")},progress:function(a){var b=a.loaded/1719931*100>>0;e&&e.message("Downloading: "+(b+"%"))}});break;case"#webaudio":MIDI.volume_scheme="chrome",DOMLoader.sendRequest({url:MIDI.soundfont_mp3_url,callback:function(a){MIDI.Soundfont=JSON.parse(a.responseText),e&&e.message("Downloading: 100%<br>Processing..."),MIDI.WebAudioAPI.connect(b),"undefined"!=typeof $&&$(".midi-player").removeClass("is-hidden")},progress:function(a){var b=a.loaded/1719931*100>>0;e&&e.message("Downloading: "+(b+"%"))}})}})}}();